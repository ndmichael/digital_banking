{% extends 'users/base.html' %} {% load static %} {% load crispy_forms_tags %}


{% block content %}

<section id="wrapper">
    <nav class="navbar navbar-expand d-flex flex-column align-items-start" id="sidebar">
        <a href="#" class=" navbar-brand text-light mt-5">
            <div class="fw-bolder display-4">
                Banking
            </div>
        </a> 
        <ul class="nav nav-tabs d-flex flex-column mt-5 w-100" id="myTab" role="tablist">
            <li class="nav-item w-100">
                <a href="#dashboard" class="nav-link active ps-4" data-bs-toggle="tab">
                    <i class=" bi bi-house-door" style="font-size: 1em;"></i>
                    Dashboard
                </a>
            </li>
            <li class="nav-item w-100">
                <a href="#account" class="nav-link ps-4" data-bs-toggle="tab">
                    <i class=" bi bi-wallet2" style="font-size: 1em;"></i>
                    Account
                </a>
            </li>
            <li class="nav-item w-100">
                <a href="#cards" class="nav-link ps-4" data-bs-toggle="tab">
                    <i class=" bi bi-credit-card-2-back" style="font-size: 1em;"></i>
                    Cards
                </a>
            </li>
            <li class="nav-item w-100">
                <a href="#investment" class="nav-link ps-4" data-bs-toggle="tab">
                    <i class=" bi bi-bar-chart-line" style="font-size: 1em;"></i>
                    Investment
                </a>
            </li>
            <li class="nav-item w-100">
                <a href="#transfer" class="nav-link ps-4" data-bs-toggle="tab">
                    <i class=" bi bi-send-plus" style="font-size: 1em;"></i>
                    Make Transfer
                </a>
            </li>
            <a href="{% url 'account_logout' %}" class="nav-link ps-4">
                <i class=" bi bi-door-closed" style="font-size: .7em;"></i>
                <small class="text-muted">Logout</small>
            </a>
        </ul>

    </nav>

    <div class="tab-content" id="tab-content">
        <div id="dashboard" class="container tab-pane active">
            <section class="row">
                <div class="col-12">
                    <div class="alert alert-primary text-center" role="alert">
                        <h4>
                             <a href="#" class="alert-link">Tonglobal Digital Banking.</a>
                        </h4>
                      </div>
                    <h5 class="py-4"><span class="text-muted">Welcome back, </span><small>{{user.username}}</small> <i class="bi bi-hand-thumbs-up-fill text-danger"></i></h5>
                </div>    
            </section>
            <section class="row">
                <div class="col-12 col-md-10 p-4 mx-auto">
                    <article class=" d-flex justify-content-between p-5 bg-white shadow-sm">
                        <div class="d-md-flex">
                            <img src="{% static 'dbank/images/platinumcard-removebg.png' %}" alt="" class="img-fluid rounded-circle" style="width: 120px; height: 120px; object-fit: cover; object-position: top;">
                            <div class="ps-3">
                                <span>First name</span>
                                <h4>{{user.first_name}}</h4>
                                <span>Last name</span>
                                <h4>{{user.last_name}}</h4>
                            </div>
                        </div>
                        
                        <div>
                            <span>Address</span>
                            <h4 class="text-muted">{{user.address}},</h4>
                            <h4>{{user.country.name}}</h4>
                            <h5>{{user.email}}</h5>
                        </div>
                    </article>
                </div>
            </section>
            <section class="row pt-5">
                <div class="col-12 col-md-10 mx-auto p-5 bg-white shadow-sm rounded-4">
                    {% if transactions %}
                        <table class=" table table-responsive">
                            <h4 class="py-4 text-primary">Recent Transactions</h4>
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Type</th>
                                    <th>Amount</th>
                                    <th>Description</th>
                                    <th>Reference</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for transaction in transactions %}
                                    <tr>
                                        <td>{{transaction.transaction_date}}</td>
                                        <td>{{transaction.record}}</td>
                                        <td>${{transaction.amount}}</td>
                                        <td>{{transaction.description}}</td>
                                        <td>{{transaction.reference}}</td>
                                        {% if transaction.status == 'pending' %}
                                            <td><span class="fw-bolder text-warning">{{transaction.status}}</span></td>
                                        {% elif transaction.status == 'success' %}
                                            <td><span class="fw-bolder text-success">{{transaction.status}}</span></td>
                                        {% else %}
                                            <td><span class="fw-bolder text-danger">{{transaction.status}}</span></td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                    <h3 class="text-primary">
                        No recent transactions
                    </h3>
                    {% endif %}
                </div>
            </section>
        </div>
        <!-- account section-->
        <div id="account" class="container tab-pane fade">
            <section class="row">
                <div class="col-12">
                    <div class="alert alert-success text-center" role="alert">
                        <b class="fs-2">${{account.balance}}</b>
                    </div>
                    <table class="table table-borderless">
                        <h5>Bank Account Details</h5>
                        <thead>
                            <tr>
                                <th class="text-muted">Account Number</th>
                                <th class="text-muted">Account Balance</th>
                                <th class="text-muted">Available Balance</th>
                                <th class="text-muted">Account Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="text-primary"><p><b>{{account.number}}</b></p></td>
                                <td><p><b>${{account.balance}}</b></p></td>
                                <td><p><b>${{account.balance}}</b></p></td>
                                <td class="text-success"><p><b>Active</b></p></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-12">
                    <table class="table table-light table-borderless shadow-sm">
                        <tbody>
                            <tr>
                                <td class="text-muted p-4">Account Type:</td>
                                <td class=" text-primary fw-bold  p-4">Elite</td>
                            </tr>
                            <tr >
                                <td class="text-muted p-4">Currency:</td>
                                <td class="text-primary fw-bold p-4">$ (Dollars)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            <section class="row g-5">
                <div class="col-12 col-md-6">
                    <div class="bg-white shadow-sm p-5">box will be here</div>
                </div>
                <div class="col-12 col-md-6">
                    <div class="bg-white shadow-sm p-5">box will be here</div>
                </div>
            </section>
        </div>
        <div id="cards" class="container tab-pane fade pt-5">
            <section class="row">
                <div class="col-12 col-md-4">
                    <div>
                        <img src="{% static 'dbank/images/platinumcard-removebg.png' %}" alt=""  class="img-fluid rounded-5" >
                    </div>
                </div>
                <div class="col-12 col-md-4 align-self-center">
                    <span class="d-flex">
                        <i class="bi bi-check-all pe-4 text-primary"></i>
                        <p>Spend more</p> 
                    </span>
                    <span class="d-flex">
                        <i class="bi bi-check-all pe-4 text-primary"></i>
                        <p>Access to up to $150,000.00 loan.</p>
                    </span>
                    <span class="d-flex">
                        <i class="bi bi-check-all pe-4 text-primary"></i>
                        <p>No hidden charges</p>
                    </span>
                    <span class="d-flex">
                        <i class="bi bi-check-all pe-4 text-primary"></i>
                        <p>No maintainance fee</p>
                    </span>
                </div>
                <div class="col-12 col-md-4 align-self-center">
                    <a href="#" class="btn btn-primary ntm-lg">
                        REQUEST TODAY.
                    </a>
                </div>
            </section>
        </div>
        <div id="investment" class="container tab-pane fade">
            <section class="row">
                <div class="col-12">
                    <h1>This Feature coming soon.</h1>
                </div>
            </section>
        </div>
        <div id="transfer" class="container tab-pane fade">
            <section class="row">
                <div class="col-12 col-md-10  mx-auto">
                    <div class="bg-white shadow-sm rounded-5 p-2 p-md-5">
                        <h3 class="py-4">International Transfer Form.</h3>
                        <form method="post" action="">
                            {% csrf_token %}
                            <div class="row">
                                <div class="form-group col-12 col-md-6 mb-3">
                                    {{form.amount|as_crispy_field}}             
                                </div>
                                <div class="form-group col-12 col-md-6 mb-3">
                                    {{ form.swift_code|as_crispy_field }}
                                </div>
                                <div class="form-group col-12 col-md-8 mb-3">
                                    {{ form.receivers_name|as_crispy_field }}
                                </div>
                                <div class="form-group col-4 col-md-4 mb-3">
                                    {{ form.pin|as_crispy_field }}
                                </div>
                                <div class="form-group col-8 col-md-6 mb-4">
                                    {{ form.beneficiary_account_number|as_crispy_field }}
                                </div>
                                <div class="form-group col-12 col-md-6">
                                    {{ form.country|as_crispy_field }}
                                </div>
                                <div class="form-group col-12 col-md-12 mb-4">
                                    {{ form.description|as_crispy_field }}
                                </div>
                                <div class="form-group col-12">
                                    {{ form.beneficiary_bank_address|as_crispy_field }}
                                </div>
        
                                <div class="pt-4">
                                    <button class="btn btn-lg btn-primary col-12 col-md-6" type="submit">
                                        SUBMIT TRANSFER
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
          </div>
      </div>
</section>



{% endblock %}